(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{309:function(t,s,r){"use strict";r.r(s);var g=r(7),e=Object(g.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("PostgreSQL提供"),s("strong",[t._v("pg_trgm")]),t._v("扩展，它实现了“trigrams”，能够更好帮助模糊搜索。")]),t._v(" "),s("p",[t._v("pg_trgm 位于 PostgreSQL contrib 包中，一般情况下都会跟随 PostgreSQL 一起安装，如果没有，请到官网查看安装方式，此处不赘叙。")]),t._v(" "),s("p",[t._v("启用 pg_trgm 扩展非常简单，只需切换到目标数据库，然后执行：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("CREATE EXTENSION pg_trgm;\n")])])]),s("p",[t._v("为了支持like使用索引，pg_trgm 支持两种PostgreSQL索引类型："),s("strong",[t._v("gist")]),t._v(" 和 "),s("strong",[t._v("gin")]),t._v("。")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("gin")])])]),t._v(" "),s("p",[t._v("创建gin索引：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("CREATE INDEX idx_name ON yourtable USING gin (md5 gin_trgm_ops);\n")])])]),s("p",[t._v("💥 ​gin索引对于模糊搜索的提升相当直观，也就是like语句中包含‘%’的情况。但是，当like语句中不包含‘%’时，postgresql会使用‘=’进行精确查找，而gin是不会加速‘=’操作符的，所以建议在为某个字段添加gin索引的情况下，也加一个btree索引，这样便可以同时处理精确搜索和模糊搜索了。")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("gist")])])]),t._v(" "),s("p",[t._v("gist索引对于空间数据的支持非常好，但是对于普通文本的模糊搜素，提升并不明显，并且索引体积很大，不推荐使用。")])])}),[],!1,null,null,null);s.default=e.exports}}]);