(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{315:function(_,a,e){"use strict";e.r(a);var v=e(7),s=Object(v.a)({},(function(){var _=this,a=_._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[a("p",[_._v("PostgreSQLæä¾›ä»¥ä¸‹ä¸‰ç§å¤‡ä»½æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œç»“åˆå®é™…éœ€æ±‚è¿›è¡Œé€‰æ‹©")]),_._v(" "),a("ol",[a("li",[_._v("SQLè½¬å‚¨")]),_._v(" "),a("li",[_._v("æ–‡ä»¶ç³»ç»Ÿçº§å¤‡ä»½")]),_._v(" "),a("li",[_._v("æŒç»­å½’æ¡£")])]),_._v(" "),a("h2",{attrs:{id:"_1-sqlè½¬å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-sqlè½¬å‚¨"}},[_._v("#")]),_._v(" 1. SQLè½¬å‚¨")]),_._v(" "),a("h3",{attrs:{id:"_1-1-å¤‡ä»½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-å¤‡ä»½"}},[_._v("#")]),_._v(" 1.1 å¤‡ä»½")]),_._v(" "),a("h4",{attrs:{id:"_1-1-1-pg-dump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-pg-dump"}},[_._v("#")]),_._v(" 1.1.1 pg_dump")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dump dbname > dumpfile\n")])])]),a("p",[a("strong",[_._v("è¯¦è§£ï¼š")])]),_._v(" "),a("ul",[a("li",[a("code",[_._v("pg_dump")]),_._v(" å‘½ä»¤æ‰§è¡Œåä¼šç”Ÿæˆç›®æ ‡æ•°æ®åº“çš„è½¬å‚¨æ–‡ä»¶ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dump")]),_._v(" é»˜è®¤ä½¿ç”¨æ‰§è¡Œè¯¥å‘½ä»¤çš„ç”¨æˆ·æ¥è¿æ¥æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ "),a("code",[_._v("-U user")]),_._v(" æ¥æŒ‡å®šç‰¹å®šç”¨æˆ·ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dump")]),_._v(" å¯é€šè¿‡ "),a("code",[_._v("-n schema")]),_._v(" æˆ–è€… "),a("code",[_._v("-t table")]),_._v(" æ¥å¯¹æŒ‡å®šè¡¨è¿›è¡Œå¤‡ä»½ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dump")]),_._v(" å¯é€šè¿‡ "),a("code",[_._v("-h host")]),_._v(" å’Œ "),a("code",[_._v("-p port")]),_._v(" å‚æ•°æ¥å¯¹è¿œç¨‹æ•°æ®åº“è¿›è¡Œå¤‡ä»½ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dump")]),_._v(" å…¶å®å°±æ˜¯PostgreSQLå®¢æˆ·ç«¯ï¼Œæ‰§è¡Œæ—¶éœ€è¦å…¶æ‰€ä½¿ç”¨çš„ç”¨æˆ·å…·æœ‰ç›¸åº”æ•°æ®åº“æˆ–è€…è¡¨çš„è¯»æƒé™ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚")])]),_._v(" "),a("p",[a("strong",[_._v("ä¼˜ç‚¹ï¼š")])]),_._v(" "),a("p",[a("code",[_._v("pg_dump")]),_._v(" çš„ä¼˜ç‚¹æ˜¯å…¶ä»–ä¸¤ç§æ–¹å¼æ‰€ä¸å…·å¤‡çš„ï¼Œé‚£å°±æ˜¯å®ƒç”Ÿæˆçš„è½¬å‚¨æ–‡ä»¶é€‚ç”¨äºä¸åŒç‰ˆæœ¬çš„PostgreSQLï¼Œä¹Ÿé€‚ç”¨äºä¸åŒæ¶æ„çš„æœåŠ¡å™¨ï¼ˆå¦‚32ä½å’Œ64ä½ï¼‰ã€‚")]),_._v(" "),a("p",[a("strong",[_._v("ç¼ºç‚¹ï¼š")])]),_._v(" "),a("p",[a("code",[_._v("pg_dump")]),_._v(" ç”Ÿæˆçš„è½¬å‚¨æ–‡ä»¶æ˜¯æ•°æ®åº“åœ¨æŸä¸€æ—¶åˆ»çš„å¿«ç…§ï¼Œæ— æ³•ä¿è¯ä¸è½¬å‚¨å®Œæˆæ—¶åˆ»çš„æ•°æ®åº“ä¸­æ•°æ®ä¸€è‡´ã€‚åŒæ—¶ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå¦‚æœæ‰§è¡Œå¦‚"),a("code",[_._v("ALTER TABLE")]),_._v("å‘½ä»¤ï¼Œé‚£ä¹ˆå°†ä¼šå‡ºç°å¼‚å¸¸ã€‚")]),_._v(" "),a("p",[a("code",[_._v("pg_dump")]),_._v(" åªèƒ½å¯¹ä¸€ä¸ªæ•°æ®åº“è¿›è¡Œå¤‡ä»½ï¼Œå¹¶ä¸”ä¸ä¼šå¤‡ä»½è¯¥æ•°æ®åº“çš„è§’è‰²å’Œè¡¨ç©ºé—´ä¿¡æ¯ã€‚")]),_._v(" "),a("h4",{attrs:{id:"_1-1-2-pg-dumpall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-pg-dumpall"}},[_._v("#")]),_._v(" 1.1.2 pg_dumpall")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dumpall > dumpfile\n")])])]),a("p",[a("strong",[_._v("è¯¦è§£ï¼š")])]),_._v(" "),a("ul",[a("li",[a("code",[_._v("pg_dumpall")]),_._v(" å¯¹å½“å‰è¿æ¥ä¸‹çš„æ‰€æœ‰æ•°æ®åº“è¿›è¡Œå¤‡ä»½ï¼ŒåŒ…æ‹¬æ•°æ®åº“çš„è§’è‰²å’Œè¡¨ç©ºé—´ä¿¡æ¯ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dumpall")]),_._v(" çš„æ‰§è¡Œéœ€è¦å½“å‰ç”¨æˆ·å…·æœ‰è¶…çº§ç®¡ç†å‘˜æƒé™ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dumpall")]),_._v(" é»˜è®¤å¤‡ä»½é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ "),a("code",[_._v("--globals-only")]),_._v("  æ¥å¯¹å¯¹é›†ç¾¤ä¸­æŸä¸€èŠ‚ç‚¹è¿›è¡Œå•ç‹¬å¤‡ä»½ã€‚")]),_._v(" "),a("li",[a("code",[_._v("pg_dumpall")]),_._v(" å½¢æˆçš„è½¬å‚¨æ–‡ä»¶åœ¨æ¢å¤æ—¶ï¼Œå°†é‡æ–°åˆ›å»ºæ‰€æœ‰è§’è‰²ã€æƒé™ã€è¡¨ç©ºé—´ç­‰ä¿¡æ¯ï¼Œåœ¨æ¢å¤å‰è¦æ…é‡è€ƒè™‘ã€‚")])]),_._v(" "),a("h3",{attrs:{id:"_1-2-æ¢å¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-æ¢å¤"}},[_._v("#")]),_._v(" 1.2 æ¢å¤")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("psql dbname < dumpfile\n")])])]),a("p",[a("strong",[_._v("è¯¦è§£ï¼š")])]),_._v(" "),a("ul",[a("li",[_._v("å°†æŒ‡å®šè½¬å‚¨æ–‡ä»¶dumpfileä¸­çš„æ•°æ®è¿˜åŸåˆ°æŒ‡å®šæ•°æ®åº“dbnameä¸­ã€‚")]),_._v(" "),a("li",[_._v("å½“è¦æ¢å¤çš„æ•°æ®åº“dbnameä¸å­˜åœ¨æ—¶ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨åˆ›å»ºï¼Œä»¥åŠé…ç½®å¥½ç›¸åº”çš„æƒé™ã€‚")]),_._v(" "),a("li",[_._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‘½ä»¤æ‰§è¡Œæ—¶å¦‚æœé‡åˆ°é”™è¯¯ï¼Œä¸ä¼šåœæ­¢ï¼Œå°†ç»§ç»­æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡ "),a("code",[_._v("--set ON_ERROR_STOP=on")]),_._v(" å‚æ•°æ¥ä½¿å…¶é‡åˆ°é”™è¯¯æ—¶åœæ­¢æ‰§è¡Œã€‚")]),_._v(" "),a("li",[_._v("å¯ä»¥é€šè¿‡ "),a("code",[_._v("--single-transaction")]),_._v(" å‚æ•°æ¥ä½¿æ•´ä¸ªæ¢å¤è¿‡ç¨‹åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ï¼Œä»è€Œè¾¾åˆ°æ‰§è¡Œå¤±è´¥æ•°æ®æ•´ä½“å›æ»šçš„æ•ˆæœã€‚ï¼ˆè¿™æ ·åšæœ‰å¥½æœ‰åï¼Œå¥½å¤„åœ¨äºå¯ä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼Œåå¤„åœ¨äºå¯èƒ½ä¸€ä¸ªæ¢å¤è¿‡ç¨‹è¦è€—è´¹å¾ˆé•¿çš„æ—¶é—´ï¼‰")]),_._v(" "),a("li",[_._v("è¯¥å‘½ä»¤æ”¯æŒ  "),a("code",[_._v("-h host")]),_._v(" ã€ "),a("code",[_._v("-p port")]),_._v(" ã€ "),a("code",[_._v("-U user")]),_._v(" ç­‰å‚æ•°ï¼Œä»è€Œå¯ä»¥å®ç°å¯¹è¿œç¨‹æ•°æ®åº“è¿›è¡Œæ¢å¤ã€‚")])]),_._v(" "),a("h3",{attrs:{id:"_1-3-å¤„ç†å¤§å‹æ•°æ®åº“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-å¤„ç†å¤§å‹æ•°æ®åº“"}},[_._v("#")]),_._v(" 1.3 å¤„ç†å¤§å‹æ•°æ®åº“")]),_._v(" "),a("p",[_._v("å¯¹äºå¤§å‹æ•°æ®åº“ï¼Œ"),a("code",[_._v("pg_dump")]),_._v(" ç”Ÿæˆçš„è½¬å‚¨æ–‡ä»¶å¯èƒ½ä¼šéå¸¸å¤§ï¼Œç”šè‡³è¶…è¿‡æŸäº›ç³»ç»Ÿçš„æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜")]),_._v(" "),a("h4",{attrs:{id:"_1-3-1-å‹ç¼©è½¬å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-å‹ç¼©è½¬å‚¨"}},[_._v("#")]),_._v(" 1.3.1 å‹ç¼©è½¬å‚¨")]),_._v(" "),a("p",[a("code",[_._v("pg_dump")]),_._v(" åœ¨æ”¯æŒæ ‡å‡†è¾“å‡ºçš„åŒæ—¶ï¼Œä¹Ÿæ”¯æŒä½¿ç”¨æ ‡å‡†çš„Unixå‹ç¼©å·¥å…·ï¼Œæ¯”å¦‚gzipï¼Œæ¥ç”Ÿæˆå‹ç¼©è½¬å‚¨ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dump dbname | gzip > filename.gz\n")])])]),a("p",[_._v("å¯¹åº”çš„å‹ç¼©è½¬å‚¨æ–‡ä»¶ï¼Œå¯é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è¿›è¡Œæ¢å¤ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("gunzip -c filename.gz | psql dbname\n")])])]),a("p",[_._v("æˆ–")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("cat filename.gz | gunzip | psql dbname\n")])])]),a("h4",{attrs:{id:"_1-3-2-åˆ‡å‰²è½¬å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-åˆ‡å‰²è½¬å‚¨"}},[_._v("#")]),_._v(" 1.3.2 åˆ‡å‰²è½¬å‚¨")]),_._v(" "),a("p",[a("code",[_._v("split")]),_._v(" å‘½ä»¤å¯ä»¥å°†"),a("code",[_._v("pg_dump")]),_._v(" è¾“å‡ºçš„è½¬å‚¨æ–‡ä»¶æŒ‰ç…§å›ºå®šå¤§å°åˆ‡å‰²æˆå¤šä¸ªå°æ–‡ä»¶ï¼Œä¸‹é¢çš„å‘½ä»¤è¡¨ç¤ºå°†è½¬å‚¨æ–‡ä»¶åˆ‡å‰²æˆå¤šä¸ª2Gçš„æ–‡ä»¶ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dump dbname | split -b 2G - filename\n")])])]),a("p",[_._v("å¯¹åº”çš„è½¬å‚¨æ–‡ä»¶ï¼Œå¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡Œæ¢å¤ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("cat filename* | psql dbname\n")])])]),a("h4",{attrs:{id:"_1-3-3-pg-dumpè‡ªå®šä¹‰è½¬å‚¨æ ¼å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-pg-dumpè‡ªå®šä¹‰è½¬å‚¨æ ¼å¼"}},[_._v("#")]),_._v(" 1.3.3 pg_dumpè‡ªå®šä¹‰è½¬å‚¨æ ¼å¼")]),_._v(" "),a("p",[_._v("å¦‚æœPostgreSQLæ‰€åœ¨çš„ç³»ç»Ÿå®‰è£…äº†zlibåº“ï¼Œé‚£ä¹ˆ"),a("code",[_._v("pg_dump")]),_._v(" åœ¨ç”Ÿæˆè½¬å‚¨æ–‡ä»¶æ—¶å°†è‡ªåŠ¨è¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©åçš„æ–‡ä»¶å¤§å°ä¸ä½¿ç”¨gzipå‹ç¼©å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥é€‰æ‹©æ€§çš„æ¢å¤è¡¨ã€‚")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dump -Fc dbname > filename\n")])])]),a("p",[_._v("è‡ªå®šä¹‰æ ¼å¼çš„è½¬å‚¨æ–‡ä»¶åªèƒ½é€šè¿‡ "),a("code",[_._v("pg_restore")]),_._v(" å‘½ä»¤è¿›è¡Œæ¢å¤ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_restore -d dbname filename\n")])])]),a("p",[_._v("ğŸŒŸ å¯¹äºéå¸¸å¤§çš„æ•°æ®åº“ï¼Œå¯ä»¥å°†åˆ‡å‰²è½¬å‚¨ä¸å…¶ä»–ä¸¤ç§æ–¹å¼ç»“åˆä½¿ç”¨ã€‚")]),_._v(" "),a("h4",{attrs:{id:"_1-3-4-pg-dumpå¹¶è¡Œè½¬å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-pg-dumpå¹¶è¡Œè½¬å‚¨"}},[_._v("#")]),_._v(" 1.3.4 pg_dumpå¹¶è¡Œè½¬å‚¨")]),_._v(" "),a("p",[_._v("å¯ä»¥é€šè¿‡ "),a("code",[_._v("pg_dump")]),_._v(" çš„å¹¶è¡Œè½¬å‚¨æ¨¡å¼æ¥åŠ é€Ÿè½¬å‚¨é€Ÿåº¦ï¼Œè¯¥æ¨¡å¼ä¸‹ï¼Œå°†åŒæ—¶å¯¹å¤šå¼ è¡¨è¿›è¡Œè½¬å‚¨ã€‚ å¯ä»¥é€šè¿‡ "),a("code",[_._v("-j")]),_._v(" å‚æ•°æ¥æ§åˆ¶å¹¶è¡Œåº¦ï¼Œå¹¶è¡Œè½¬å‚¨ä»…æ”¯æŒä»¥ç›®å½•æ ¼å¼è¾“å‡ºï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("pg_dump -j num -F d -f out.dir dbname\n")])])]),a("p",[_._v("å¯ä»¥ä½¿ç”¨  "),a("code",[_._v("pg_restore -j")]),_._v(" æ¥å¹¶è¡Œæ¢å¤ï¼Œè¯¥å‘½ä»¤é€‚ç”¨äºä¸Šé¢æ‰€æœ‰æ–¹æ³•å½¢æˆçš„è½¬å‚¨æ–‡ä»¶ã€‚")]),_._v(" "),a("h2",{attrs:{id:"_2-æ–‡ä»¶ç³»ç»Ÿçº§åˆ«å¤‡ä»½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ–‡ä»¶ç³»ç»Ÿçº§åˆ«å¤‡ä»½"}},[_._v("#")]),_._v(" 2. æ–‡ä»¶ç³»ç»Ÿçº§åˆ«å¤‡ä»½")]),_._v(" "),a("p",[_._v("ç›´æ¥å¤‡ä»½PostgreSQLæ•°æ®ç›®å½•ï¼ˆæ³¨æ„ï¼šPostgreSQLçš„æ–‡ä»¶ç›®å½•ä¸ä¸€å®šæ˜¯ "),a("code",[_._v("/usr/local/pgsql/data")]),_._v("ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹é…ç½®æ–‡ä»¶ "),a("code",[_._v("postgresql.conf")]),_._v(" ç¡®å®šï¼‰ï¼š")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("tar -cf backup.tar /usr/local/pgsql/data\n")])])]),a("p",[_._v("éœ€è¦æ¢å¤æ•°æ®åº“åªéœ€è¦ç”¨å¤‡ä»½å¥½çš„ç›®å½•è¿›è¡Œè¦†ç›–å³å¯ã€‚")]),_._v(" "),a("p",[a("strong",[_._v("â—ï¸ æ³¨æ„ï¼š")])]),_._v(" "),a("ul",[a("li",[_._v("è¯¥æ–¹å¼å¤‡ä»½å’Œè¿˜åŸæ•°æ®åº“æ—¶ï¼Œå¿…é¡»å…³é—­PostgreSQLã€‚")]),_._v(" "),a("li",[_._v("è¯¥æ–¹å¼è¿˜åŸæ•°æ®åº“æ—¶ï¼Œæ— æ³•é€‰æ‹©æ€§è¿˜åŸã€‚è¿™æ˜¯å› ä¸ºåªæœ‰æŒ‡å®šçš„æ•°æ®æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰ç›¸åº”çš„äº‹åŠ¡æäº¤æ—¥å¿— "),a("code",[_._v("pg_xact/*")]),_._v(" æ˜¯ä¸è¡Œçš„ï¼Œè€Œäº‹åŠ¡æäº¤æ—¥å¿—æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ— æ³•é€‰æ‹©æ€§æ‹†åˆ†ã€‚")])]),_._v(" "),a("h2",{attrs:{id:"_3-è¿ç»­å½’æ¡£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-è¿ç»­å½’æ¡£"}},[_._v("#")]),_._v(" 3. è¿ç»­å½’æ¡£")]),_._v(" "),a("p",[_._v("PostgreSQLé€šè¿‡ "),a("strong",[_._v("WAL")]),_._v("ï¼ˆ write ahead logï¼‰æ–‡ä»¶æ¥è®°å½•æ•°æ®åº“çš„æ¯ä¸€ä¸ªå˜åŒ–ï¼Œå¦‚æœPostgreSQLå‘ç”Ÿå´©æºƒï¼Œé‚£ä¹ˆå¯ä»¥â€œå›æ”¾â€WALæ–‡ä»¶æ¥ä½¿å…¶æ¢å¤åˆ°æœ€åæ£€æŸ¥ç‚¹çš„çŠ¶æ€ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œé€šè¿‡å®šæœŸçš„æ–‡ä»¶ç³»ç»Ÿå¤‡ä»½ä»¥åŠWALå¤‡ä»½ï¼Œå¯ä»¥å®ç°ä»»æ„æ—¶é—´ç‚¹çš„æ•°æ®å¤‡ä»½å’Œæ¢å¤ã€‚")]),_._v(" "),a("h3",{attrs:{id:"_3-1-å¤‡ä»½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-å¤‡ä»½"}},[_._v("#")]),_._v(" 3.1 å¤‡ä»½")]),_._v(" "),a("ol",[a("li",[a("p",[_._v("ä¿®æ”¹é…ç½®æ–‡ä»¶ "),a("code",[_._v("postgresql.conf")])]),_._v(" "),a("p",[_._v("å¯ç”¨ WAL")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("wal_level = replica\narchive_mode = on\n")])])]),a("p",[_._v("é…ç½®å½’æ¡£å‘½ä»¤")]),_._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[_._v("archive_command = 'test ! -f /home/postgresql/archive/%f && cp %p /home/postgresql/archive/%f'\n")])])])]),_._v(" "),a("li",[a("p",[_._v("åˆ›å»ºåŸºç¡€å¤‡ä»½")]),_._v(" "),a("p",[_._v("é€šè¿‡ "),a("code",[_._v("pg_basebackup")]),_._v(" å‘½ä»¤åˆ›å»ºåŸºç¡€å¤‡ä»½ã€‚")])])]),_._v(" "),a("h3",{attrs:{id:"_3-2-æ¢å¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æ¢å¤"}},[_._v("#")]),_._v(" 3.2 æ¢å¤")]),_._v(" "),a("ol",[a("li",[a("p",[_._v("åœæ­¢PostgreSQLã€‚")])]),_._v(" "),a("li",[a("p",[_._v("å¤åˆ¶PostgreSQLæ•°æ®ç›®å½•åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ä¸­ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("åˆ é™¤PostgreSQLæ•°æ®ç›®å½•ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("å°†ä¸´æ—¶ç›®å½•ä¸­å¤åˆ¶å‡ºæ¥çš„PostgreSQLæ•°æ®ç›®å½•æ”¾å…¥åˆ°å…¶åŸæ¥çš„ä½ç½®ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("æ¸…ç©ºpg_walç›®å½•ä¸­çš„æ–‡ä»¶ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("å°†æƒ³è¦è¿˜åŸçš„æ—¶é—´ç‚¹çš„WALæ–‡ä»¶æ”¾å…¥pg_walç›®å½•ä¸­ã€‚")]),_._v(" "),a("p",[_._v("å¦‚æœæƒ³è¦è¿˜åŸæœ€æ–°çš„ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬2æ­¥ä¸­æ‹·è´å‡ºçš„pg_walç›®å½•ä¸‹çš„æ–‡ä»¶ï¼›å¦‚æœæƒ³è¦è¿˜åŸåˆ°æ›´æ—©æ—¶é—´ï¼Œé‚£ä¹ˆä½¿ç”¨WALå½’æ¡£ä¸­çš„æ–‡ä»¶ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("åœ¨PostgreSQLæ•°æ®ç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º "),a("code",[_._v("recovery.signal")]),_._v(" çš„æ–‡ä»¶ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("å¯åŠ¨PostgreSQLï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ¢å¤å®Œæˆåå°†è‡ªåŠ¨åˆ é™¤ç¬¬7æ­¥ä¸­åˆ›å»ºçš„  "),a("code",[_._v("recovery.signal")]),_._v(" æ–‡ä»¶ã€‚")])]),_._v(" "),a("li",[a("p",[_._v("æ£€æŸ¥æ•°æ®åº“çŠ¶æ€æ˜¯å¦ä¸é¢„æœŸä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œå›åˆ°æ­¥éª¤1ï¼Œä»”ç»†æ£€æŸ¥ï¼Œé‡æ–°æ¢å¤ã€‚")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);